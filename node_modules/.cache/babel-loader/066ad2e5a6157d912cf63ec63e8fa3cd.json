{"ast":null,"code":"'use strict';\n\nvar promisify = require('promisify-es6');\n\nvar moduleConfig = require('./utils/module-config');\n\nvar streamToValue = require('./utils/stream-to-value');\n\nmodule.exports = function (arg) {\n  var send = moduleConfig(arg);\n  return promisify(function (id, callback) {\n    var request = {\n      path: 'ping',\n      args: id,\n      qs: {\n        n: 1\n      } // Transform the response stream to a value:\n      // { Success: <boolean>, Time: <number>, Text: <string> }\n\n    };\n\n    var transform = function transform(res, callback) {\n      streamToValue(res, function (err, res) {\n        if (err) {\n          return callback(err);\n        } // go-ipfs http api currently returns 3 lines for a ping.\n        // they're a little messed, so take the correct values from each lines.\n\n\n        var pingResult = {\n          Success: res[1].Success,\n          Time: res[1].Time,\n          Text: res[2].Text\n        };\n        callback(null, pingResult);\n      });\n    };\n\n    send.andTransform(request, transform, callback);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}