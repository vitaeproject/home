{"ast":null,"code":"'use strict';\n\nvar base58 = require('bs58');\n\nvar multihash = require('multihashes');\n\nvar CID = require('cids');\n\nvar urlPattern = /^https?:\\/\\/[^/]+\\/(ip(f|n)s)\\/((\\w+).*)/;\nvar pathPattern = /^\\/(ip(f|n)s)\\/((\\w+).*)/;\n\nfunction isMultihash(hash) {\n  var formatted = convertToString(hash);\n\n  try {\n    var buffer = new Buffer(base58.decode(formatted));\n    multihash.decode(buffer);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction isCID(hash) {\n  try {\n    return CID.isCID(new CID(hash));\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction isIpfs(input, pattern) {\n  var formatted = convertToString(input);\n\n  if (!formatted) {\n    return false;\n  }\n\n  var match = formatted.match(pattern);\n\n  if (!match) {\n    return false;\n  }\n\n  if (match[1] !== 'ipfs') {\n    return false;\n  }\n\n  var hash = match[4];\n  return isCID(hash);\n}\n\nfunction isIpns(input, pattern) {\n  var formatted = convertToString(input);\n\n  if (!formatted) {\n    return false;\n  }\n\n  var match = formatted.match(pattern);\n\n  if (!match) {\n    return false;\n  }\n\n  if (match[1] !== 'ipns') {\n    return false;\n  }\n\n  return true;\n}\n\nfunction convertToString(input) {\n  if (Buffer.isBuffer(input)) {\n    return base58.encode(input);\n  }\n\n  if (typeof input === 'string') {\n    return input;\n  }\n\n  return false;\n}\n\nmodule.exports = {\n  multihash: isMultihash,\n  cid: isCID,\n  ipfsUrl: function ipfsUrl(url) {\n    return isIpfs(url, urlPattern);\n  },\n  ipnsUrl: function ipnsUrl(url) {\n    return isIpns(url, urlPattern);\n  },\n  url: function url(_url) {\n    return isIpfs(_url, urlPattern) || isIpns(_url, urlPattern);\n  },\n  urlPattern: urlPattern,\n  ipfsPath: function ipfsPath(path) {\n    return isIpfs(path, pathPattern);\n  },\n  ipnsPath: function ipnsPath(path) {\n    return isIpns(path, pathPattern);\n  },\n  path: function path(_path) {\n    return isIpfs(_path, pathPattern) || isIpns(_path, pathPattern);\n  },\n  pathPattern: pathPattern,\n  urlOrPath: function urlOrPath(x) {\n    return isIpfs(x, urlPattern) || isIpns(x, urlPattern) || isIpfs(x, pathPattern) || isIpns(x, pathPattern);\n  }\n};","map":null,"metadata":{},"sourceType":"script"}